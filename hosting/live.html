<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Host | Bluekid</title>

    <link rel="stylesheet" href="../css/all.css">
    <link rel="stylesheet" href="../css/hosting/live.css">
    <link rel="shortcut icon" href="../asset/bklogo.png" type="image/x-icon">
    <script src="https://kit.fontawesome.com/44f1506527.js" crossorigin="anonymous"></script>
</head>
<body>
    <dialog id="gameClosed" class="newdialog">
        <h1><i class="fa-light fa-clock fa-lg"></i> Game closed due to inactivity</h1>
        <div style="display: flex;gap:5px;">
            <button style="flex:1;" onclick="location.reload()" class="new_puffy_button primary"><i class="fa-light fa-clock-rotate-left"></i> Rehost</button>
            <a href="../profile/index.html" style="flex:1;"><button class="new_puffy_button" style="width: 100%;"><i class="fa-light fa-house-user"></i> Go to home</button></a>
        </div>
        
    </dialog>
    <dialog id="firefoxnotsupported">
        <h1>Firefox isn't supported.</h1>
        <p>For some reason, Firebase Functions break on Firefox for Bluekid Hosting. Please switch to another browser.</p>
        <b>You can however join games! (so far)</b>
        <a href="../profile/index.html"><button class="new_puffy_button primary">Back</button></a>
    </dialog>
    <dialog id="mobileNotSupported" style="text-align: center;" class="newdialog">
        <h1>Notice</h1>
        <p>Hosting is not yet supported on mobile. If you would like to host, please switch to a computer. <b>You can still join games though!</b></p>
        <div class="actions" style="align-items: stretch;">
            <a href="../profile/index.html"><button class="new_puffy_button primary" style="width: 100%;height: 100%;"><i class="fa-light fa-home-user"></i> Profile</button></a>
            <a href="../join.html"><button class="new_puffy_button" style="width: 100%;height: 100%;"><i class="fa-light fa-right-to-bracket"></i> Join game</button></a>
        </div>
    </dialog>
    <dialog class="newdialog" id="shareGame">
        <div class="container" style="display: none;" id="noShareSupport"><i class="fa-light fa-lg fa-circle-exclamation"></i> Error: Your browser doesn't<br>support external sharing.</div>
        <h1 style="text-align: center;">Share game</h1>
        <div class="shareOptions">
            <div class="container" id="inviteFriend">
                <p><i class="fa-light fa-lg fa-envelope"></i> Invite a friend<br><span class="subtitle">Sends them an invite directly on Bluekid!</span></p>
            </div>
            <div class="container" id="inviteElsewhere">
                <p><i class="fa-light fa-lg fa-share"></i> Send join link elsewhere<br><span class="subtitle">Get the link to post anywhere!</span></p>
            </div>
        </div>
        <form method="dialog">
            <button class="new_puffy_button">Close</button>
        </form>
    </dialog>
    <div class="settingsSection" id="sectex">
        <h2 class="container">Setting Section Name</h2>
        <div class="sectioncontent"></div>
    </div>

    <!-- BEGIN: SETTING TYPES -->

    <div class="setting" example id="number">
        <!-- <input type="number" class="input"> -->
        <div class="inputfield" style="flex:1;">
            <input type="number" class="input2" placeholder="" autocomplete="off" id="" required />
            <label for="" class="label">example property</label>
        </div>
    </div>

    <div class="setting" example id="bool">
        <label class="toggle" for="boolId">
            <input class="toggle_input" type="checkbox" id="boolId">
            <div class="toggle_fill"></div>
            <span>Bool Text</span>
        </label>
    </div>

    <!-- END: SETTING TYPES -->

    <div id="game">
        <div id="gamecontent">

        </div>
    </div>
    <div id="codeAnimation">
        <p>Be prepared! Go to <u>https://bluekid.netlify.app/join</u> to enter the code:</p>
        <div id="code1" class="codepreview"></div>
    </div>
    <div id="host_preperation">
        <section style="width: 75vw;display:flex;flex-direction: column;justify-content: space-between;gap:10px;" class="section__center">
            <div style="flex:1 1 0;overflow-x:hidden;padding-right: 10px;">
                <h1 id="gamemodename">GM-NAME</h1>
                <hr>
                <div class="settingsContainer">
                    <h1>Gamemode Settings</h1>
                    <div class="container" id="settings">
                        
                    </div>
                </div>
                <div class="space"></div>
                <div class="settingsContainer">
                    <h1>Privacy Settings</h1>
                    <div class="container">
                        <div class="warning everyoneWarning" hide id="publicWarning"><i class="fa-light fa-triangle-exclamation fa-lg"></i> WARNING: Anyone who opens your profile can join you.</div>
                        <p style="font-size: 1.25rem;"><i class="fa-light fa-right-to-bracket"></i> Who can join</p>
                        <select id="privacy" class="new_select">
                            <option value="public">Everyone</option>
                            <option selected value="friends">Code &amp; Friends only</option>
                            <option value="private">Code only</option>
                        </select>
                        <div class="littlespace"></div>
                        <label class="toggle" for="codeAlwaysVisible">
                            <input class="toggle_input" checked type="checkbox" id="codeAlwaysVisible">
                            <div class="toggle_fill"></div>
                            <span>Code always visible <i class="fa-light fa-circle-question" data-tooltip="If disabled, you will have to show the code manually."></i></span>
                        </label>
                        <div class="littlespace"></div>
                        <label class="toggle" for="requireAccount">
                            <input class="toggle_input" type="checkbox" id="requireAccount">
                            <div class="toggle_fill"></div>
                            <span>Require account <i class="fa-light fa-circle-question" data-tooltip="People must be logged in as a user. Also enforces 13+ users"></i></span>
                        </label>
                    </div>
                </div>
                <div class="space"></div>
                <div class="settingsContainer">
                    <h1>Player Settings</h1>
                    <div class="container">
                        <div id="maxPlayersLimit" class="container bkplusbanner">
                            <img src="../asset/bluekidplus/bkpbanner.png" width="250" alt="bluekid plus banner">
                            <div style="font-size: 1.25rem;">
                                <h1>Player limit reached</h1>
                                <p>The free limit is 45 people per game. Consider buying Bluekid+ to expand to 200 people!</p>
                                <a href="../profile/purchase/index.html"><button class="new_puffy_button bkp"><i class="fa-light fa-circle-up"></i> Upgrade</button></a>
                                <button id="limitFixIt" class="new_puffy_button">Fix it</button>
                            </div>
                        </div>
                        <!-- <p style="font-size: 1.25rem;"><i class="fa-light fa-users"></i> Max Players</p> -->
                        <div class="inputfield" style="flex:1;">
                            <input type="number" value="24" class="input2" placeholder="" autocomplete="off" id="maxPlayers" required />
                            <label for="maxPlayers" class="label"><i class="fa-light fa-users"></i> Max Players</label>
                        </div>
                        <div class="space"></div>
                        <label class="toggle" for="randomizedUsernames">
                            <input class="toggle_input" type="checkbox" id="randomizedUsernames">
                            <div class="toggle_fill"></div>
                            <span>Randomized Usernames</span>
                        </label>
                    </div>
                </div>
                <div class="settingsContainer" id="testingSection">
                    <h1>Debug settings</h1>
                    <div class="container" style="display: flex;flex-direction: column;gap:5px;">
                        <label class="toggle" for="debugMode">
                            <input class="toggle_input" type="checkbox" id="debugMode">
                            <div class="toggle_fill"></div>
                            <span>Debug mode</span>
                        </label>

                        <label class="toggle" for="logs">
                            <input class="toggle_input" type="checkbox" id="logs">
                            <div class="toggle_fill"></div>
                            <span>Extra Logs enabled</span>
                        </label>
                    </div>
                    
                </div>
            </div>
            
            <div style="display: flex;gap:5px;">
                <button style="flex:1;" id="startHosting" class="new_puffy_button primary"><i class="fa-light fa-server"></i> Start hosting</button>
                <a href="./index.html" style="flex:1;"><button style="width: 100%;" class="new_puffy_button danger">Back</button></a>
            </div>
            
        </section>
    </div>
    <div id="host">
        <div id="top">
            <div id="topcontent" style="width: 75%;">
                <div class="topbeginning container">
                    <p id="version" style="font-size: 1.5rem;"></p>
                    <div class="hostActions">
                        <button id="autoStartBtn" class="new_puffy_button"><i class="fa-light fa-timer"></i> Autostart</button>
                        <button id="fullscreenToggle" class="new_puffy_button icon" data-tooltip="Fullscreen"><i class="fa-light fa-expand"></i></button>
                    </div>
                </div>
                <div class="step" first>
                    <div class="stepCircle">1</div>
                    <div class="seperator"></div>
                    <div style="flex:1;" class="stepcontent">
                        <p>Go to Bluekid:</p>
                        <div style="font-size: 2rem;font-weight: bold;" class="codepreview"><u>https://bluekid.netlify.app/join</u></div>
                    </div>
                </div>
                <div class="step">
                    <div class="stepCircle">2</div>
                    <div class="seperator"></div>
                    <div style="flex:1;" class="stepcontent">
                        <p>Enter the code:</p>
                        <div id="code" style="font-size: 3.5rem;font-weight: bold;" class="codepreview"><u>https://bluekid.netlify.app/join</u></div>
                        <div class="codeActions">
                            <button id="toggleCodeVisibility" class="new_puffy_button icon primary" data-tooltip="Toggle code"><i class="fa-light fa-eye"></i></button>
                            <button id="copyUrl" class="new_puffy_button icon" data-tooltip="Copy code"><i class="fa-light fa-copy"></i></button>
                        </div>
                        <div class="or">
                            <div class="orLine"></div>
                            <p>OR</p>
                            <div class="orLine"></div>
                        </div>
                        <div id="qrcode"></div>
                    </div>
                </div>
                <!-- <div class="container" style="display: flex;justify-content: space-between;align-items: center;">
                    <div class="autostartContainer">
                        <i id="autostartIcon" class="fa-light fa-play fa-beat-fade fa-lg"></i>
                        <p id="autostart">Autostart is disabled.</p>
                    </div>
                    <div>
                        <button class="new_puffy_button icon"><i class="fa-light fa-sliders"></i></button>
                    </div>
                </div> -->
                <div class="actions" style="margin-top: .5rem;">
                    <button class="new_puffy_button green" id="start"><i class="fa-light fa-play"></i> Start game</button>
                    <button class="new_puffy_button primary" id="share"><i class="fa-light fa-share-nodes"></i> Share</button>
                </div>
                
            </div>
            
            <div class="quickGameInfo">
                <div class="playerCount">
                    <p><i class="fa-light fa-users"></i> <span id="people">0</span>/<span id="maxplayers">0</span></p>
                </div>
                <div id="debugModeIndicator">
                    <i class="fa-light fa-bug"></i>
                </div>
            </div>

            <p id="noplayers">Students will start showing here once they join! You can kick, view profiles, and more by just hovering.</p>
            <div id="players">
            </div>
        </div>
        

        <div class="player container" id="plrex">
            <img src="../asset/char/blue_notexture.png" alt="blue" width="64">
            <div>
                <p>Username</p>
                <div class="playerbadges">
                    <!-- <img src="../asset/badges/Verified.png" alt="badge" width="24">
                    <img src="../asset/badges/bluekidplus.png" alt="badge" width="24"> -->
                </div>
            </div>
            <div class="playerActions">
                <button class="new_puffy_button icon danger" data-tooltip="Kick"><i class="fa-light fa-xmark"></i></button>
                <a data-tooltip="View profile" target="_blank"><button class="new_puffy_button icon"><i class="fa-light fa-address-card"></i></button></a>
            </div>
        </div>

        
    </div>

    <script src="../js/util/jquery.js"></script>
    <script src="../js/util/qrcode.js"></script>
    <script src="../js/hosting/live.js" type="module"></script>
</body>
</html>